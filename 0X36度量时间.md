# 0X36度量时间

## 前置知识

* 0X34获取系统时间

## 正文

### 1. 度量脚本执行时间

os.clock函数在交互式编程环境中使用效果不明显,因为每一句命令都会被当成一个小脚本执行.而os.clock函数度量的是整个脚本执行的时间.

在脚本中调用这个函数会返回一个数值.它表示从脚本开始执行到现在位置大概用了都少时间(单位是秒).下边是一个示例脚本,把它保存成文件,用Lua虚拟机运行:

>```lua
>x=0
>for i=1,10 do
>    for j=1,1e7 do
>        x=x+1
>    end
>    print(os.clock())
>end
>print('total time',os.clock()))
>```

演示: 度量脚本执行时间 <https://www.bilibili.com/video/av16866561/>

### 2. 记录时间

os.time函数返回一个数字,这个数字表示一个特定的时间点.如果不用任何参数调用它,它会返回表示当前时刻的一个数字.但是这个数字没有任何格式,难以看懂.要想看这个数字表示几月几号几点就要把它作为第二个参数传给os.date.例如:

>```lua
>x=os.time()
>os.date('c',x)
>```

它也可以用于把os.date返回的带有时间信息的表压缩为一个整数.例如:

>```lua
>x=os.date('*t')
>y=os.time(x)
>os.date('c',y)
>```

### 3. 计算时间间隔

os.time返回的表示时间的数可以传递给os.difftime.它能计算出两者的差距(单位是秒).

>```lua
>a=os.time()
>b=os.time()
>os.difftime(b,a)
>```

注意这里是b的时间减a.(这里反过来可能得到负数.)

## 后续推荐

暂无
